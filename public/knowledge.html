<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ナレッジ管理 - 示唆出しシステム</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 text-gray-900">
  <!-- Header -->
  <header class="bg-gradient-to-r from-slate-950 to-slate-900 px-6 h-20 flex items-center justify-between text-white">
    <div class="text-lg font-semibold tracking-tight">
      示唆出しシステム
      <span class="ml-3 text-xs font-normal px-2 py-0.5 rounded-full bg-white/10 align-middle">
        ナレッジ管理
      </span>
    </div>
    <div class="flex items-center gap-4 text-sm">
      <span class="text-slate-200">管理者：山田 太郎</span>
      <button class="px-3 py-1 rounded-full border border-slate-400/70 text-xs hover:bg-white/10">
        設定
      </button>
      <button class="px-3 py-1 rounded-full bg-white text-slate-900 text-xs font-semibold hover:bg-slate-100">
        ログアウト
      </button>
    </div>
  </header>

  <div class="flex">
    <!-- Sidebar -->
    <aside class="w-60 bg-white shadow-md min-h-[calc(100vh-80px)] p-4 border-r border-gray-200">
      <div class="text-xs text-gray-500 font-semibold mb-2 uppercase">メニュー</div>
      <nav class="space-y-1 text-sm">
        <a href="./operator.html" class="block px-3 py-2 rounded-md hover:bg-gray-100">
          オペレーター画面
        </a>
        <a href="./knowledge.html" class="block px-3 py-2 rounded-md bg-blue-600 text-white font-medium">
          ナレッジ管理
        </a>
        <a href="./dashboard.html" class="block px-3 py-2 rounded-md hover:bg-gray-100">
          ダッシュボード
        </a>
      </nav>

      <div class="mt-6">
        <div class="text-xs text-gray-500 font-semibold mb-2 uppercase">最近のセッション</div>
        <div class="space-y-2 text-sm">
          <div class="border border-gray-200 rounded-md p-2 bg-gray-50">
            <div class="font-medium">E21-2024-001</div>
            <div class="text-xs text-green-600">通話中</div>
          </div>
          <div class="border border-gray-200 rounded-md p-2 bg-gray-50">
            <div class="font-medium">E21-2024-002</div>
            <div class="text-xs text-gray-500">待機</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-6">
      <!-- ページヘッダー -->
      <section class="mb-6">
        <h1 class="text-2xl font-semibold mb-1">ナレッジ管理</h1>
        <p class="text-sm text-gray-600 mb-1">
          関連ドキュメントをもとに作成されたナレッジを一覧・確認できます。必要に応じて編集画面から内容を更新してください。
        </p>
      </section>

      <!-- 2カラムレイアウト：左一覧(5) / 右詳細(7) -->
      <section class="grid grid-cols-12 gap-6 mt-2">
        <!-- 左: ナレッジ一覧 -->
        <div class="col-span-5">
          <div class="bg-white border border-gray-200 rounded-xl p-4 h-full flex flex-col">
            <div class="flex items-center justify-between mb-3">
              <div>
                <h2 class="text-sm font-semibold text-gray-800">ナレッジ一覧</h2>
                <p class="text-xs text-gray-500">
                  左の一覧からナレッジを選択すると、右側に詳細が表示されます。
                </p>
              </div>
                <button
                  type="button"
                  class="px-3 py-1 text-xs rounded-full border border-blue-500 text-blue-600 hover:bg-blue-50"
                  onclick="window.location.href='./knowledge_register.html';"
                >
                + ナレッジ登録
              </button>
            </div>

            <!-- 絞り込み（ダミー） -->
            <div class="flex items-center gap-2 mb-3 text-xs">
              <input
                id="knowledge-search-input"
                type="text"
                placeholder="キーワードで検索（タイトル・エラーコードなど）"
                class="flex-1 border border-gray-300 rounded-lg px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-blue-500"
              />
            </div>

            <!-- フィルターバー -->
            <div class="flex flex-wrap items-center gap-3 mb-3">

            <!-- 種別フィルタ -->
            <div class="flex items-center gap-2">
                <label for="knowledge-kind-filter" class="text-xs text-gray-500">種別</label>
                <select
                id="knowledge-kind-filter"
                class="rounded-md border border-gray-300 px-2 py-1 text-xs bg-white"
                >
                <option value="">すべて</option>
                <option value="手順書">手順書</option>
                <option value="トラブルシュート">トラブルシュート</option>
                <option value="FAQ">FAQ</option>
                </select>
            </div>

            <!-- 最終更新フィルタ -->
            <div class="flex items-center gap-2">
                <label for="knowledge-updated-filter" class="text-xs text-gray-500">最終更新</label>
                <select
                id="knowledge-updated-filter"
                class="rounded-md border border-gray-300 px-2 py-1 text-xs bg-white"
                >
                <option value="all">すべて</option>
                <option value="7">直近7日</option>
                <option value="30">直近30日</option>
                <option value="90">直近90日</option>
                </select>
            </div>

            <!-- ステータスフィルタ -->
                <div class="flex items-center gap-2">
                <label for="knowledge-updated-filter" class="text-xs text-gray-500">ステータス</label>
                <select
                id="knowledge-status-filter"
                class="border border-gray-300 rounded-lg px-2 py-1 text-xs text-gray-700 focus:outline-none focus:ring-1 focus:ring-blue-500"
                >
                <option value="">すべて</option>
                <option value="published">公開</option>
                <option value="draft">下書き</option>
                </select>
                </div>
            </div>

            <!-- 一覧テーブル -->
            <div class="border border-gray-200 rounded-lg overflow-hidden bg-gray-50 flex-1">
              <table class="min-w-full text-xs">
                <thead class="bg-gray-100 border-b border-gray-200 text-gray-500">
                  <tr>
                    <th class="px-3 py-2 text-left font-medium w-[55%]">タイトル</th>
                    <th class="px-2 py-2 text-left font-medium w-[15%]">エラーコード</th>
                    <th class="px-2 py-2 text-left font-medium w-[15%]">種別</th>
                    <th class="px-2 py-2 text-left font-medium w-[15%]">最終更新</th>
                  </tr>
                </thead>
              </table>
              <div class="overflow-y-auto">
                <table class="min-w-full text-xs">
                  <tbody id="knowledge-list-body" class="bg-white divide-y divide-gray-100">
                    <!-- JS で行を追加 -->
                  </tbody>
                </table>
              </div>
            </div>

            <p id="knowledge-list-empty" class="mt-3 text-xs text-gray-400 hidden">
              表示できるナレッジがありません。
            </p>
          </div>
        </div>

        <!-- 右: ナレッジ詳細（参照のみ） -->
        <div class="col-span-7">
          <div class="bg-white border border-gray-300 rounded-xl p-4 h-full flex flex-col">
            <div class="flex items-center justify-between mb-2">
              <div>
                <h2 class="text-sm font-semibold">ナレッジ詳細</h2>
                <p id="knowledge-detail-subtitle" class="text-xs text-gray-600">
                  左の一覧からナレッジを選択してください。
                </p>
              </div>
              <div class="flex items-center gap-2">
                <span
                  id="knowledge-detail-status-badge"
                  class="hidden text-[11px] px-2 py-0.5 rounded-full border border-gray-300 text-gray-600"
                >
                  <!-- status -->
                </span>
                <button
                  id="knowledge-detail-edit-btn"
                  type="button"
                  disabled
                  class="px-3 py-1 text-xs rounded-full bg-slate-900 text-white disabled:opacity-40 disabled:cursor-not-allowed"
                >
                  編集
                </button>
              </div>
            </div>

            <!-- メタ情報 -->
            <div id="knowledge-detail-meta" class="text-[11px] text-gray-500 mb-3 space-x-2">
              <!-- JS でセット -->
            </div>

            <!-- 詳細本体 -->
            <div class="mt-0 text-sm leading-relaxed space-y-3 flex-1" id="knowledge-detail-body">
              <!-- 概要 -->
              <section class="border border-gray-200 rounded-lg p-0 h-56 flex flex-col bg-white">
                <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-full bg-indigo-50 flex items-center justify-center text-indigo-600 text-lg">
                    ℹ
                  </div>
                  <div>
                    <p class="text-[11px] uppercase tracking-wide text-gray-400">Overview</p>
                    <p class="text-xs font-semibold text-gray-800">概要</p>
                  </div>
                </div>
                <div id="detail-overview" class="px-3 py-3 text-gray-500 overflow-y-auto flex-1 text-sm">
                  まだナレッジが選択されていません。
                </div>
              </section>

              <!-- 症状と想定される原因 -->
              <section class="border border-gray-200 rounded-lg p-0 h-56 flex flex-col bg-white">
                <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-full bg-orange-50 flex items-center justify-center text-orange-500 text-lg">
                    ⚠
                  </div>
                  <div>
                    <p class="text-[11px] uppercase tracking-wide text-gray-400">Symptoms &amp; Causes</p>
                    <p class="text-xs font-semibold text-gray-800">症状と想定される原因</p>
                  </div>
                </div>
                <div id="detail-symptoms" class="px-3 py-3 text-gray-500 overflow-y-auto flex-1 text-sm">
                  まだナレッジが選択されていません。
                </div>
              </section>

              <!-- 一次対応フロー -->
              <section class="border border-gray-200 rounded-lg p-0 h-56 flex flex-col bg-white">
                <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-full bg-emerald-50 flex items-center justify-center text-emerald-600 text-lg">
                    ▶
                  </div>
                  <div>
                    <p class="text-[11px] uppercase tracking-wide text-gray-400">First Response</p>
                    <p class="text-xs font-semibold text-gray-800">一次対応フロー（オペレーター案内用）</p>
                  </div>
                </div>
                <div id="detail-flow" class="px-3 py-3 text-gray-500 overflow-y-auto flex-1 text-sm">
                  まだナレッジが選択されていません。
                </div>
              </section>

              <!-- 関連資料 -->
              <section class="border border-gray-200 rounded-lg p-0 h-56 flex flex-col bg-white">
                <div class="px-3 py-2 bg-gray-50 border-b border-gray-100 flex items-center gap-2">
                  <div class="w-8 h-8 rounded-full bg-sky-50 flex items-center justify-center text-sky-600 text-lg">
                    📄
                  </div>
                  <div>
                    <p class="text-[11px] uppercase tracking-wide text-gray-400">Related Documents</p>
                    <p class="text-xs font-semibold text-gray-800">関連資料</p>
                  </div>
                </div>
                <div id="detail-docs" class="px-3 py-3 text-gray-500 overflow-y-auto flex-1 text-sm">
                  まだナレッジが選択されていません。
                </div>
              </section>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Data & JS -->
  <script src="../assets/data/knowledgeData.js"></script>
  <script src="../assets/js/knowledge/knowledge.js"></script>
</body>
</html>
